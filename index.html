<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Seasons Mini - HTML5</title>
    <style>
        :root {
            --spring: #4CAF50; --summer: #FFD700;
            --autumn: #FF9800; --winter: #2196F3;
        }
        body { font-family: sans-serif; background: #1a1a1a; color: white; margin: 0; padding: 10px; overflow-x: hidden; }
        
        /* è³‡æºæ¬„ */
        .stats { display: flex; justify-content: space-around; background: #333; padding: 10px; border-radius: 8px; margin-bottom: 10px; font-size: 0.9rem; }
        .energy { color: #ffeb3b; }

        /* å­£ç¯€é¡¯ç¤º */
        #season-display { 
            text-align: center; padding: 15px; border-radius: 12px; 
            font-weight: bold; font-size: 1.2rem; margin-bottom: 10px;
            transition: 0.5s; text-shadow: 1px 1px 2px #000;
        }

        /* å‹•ä½œå€ */
        .actions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        button { padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .btn-roll { background: #e91e63; color: white; }
        .btn-next { background: #555; color: white; }

        /* å¡ç‰Œå€ */
        .card-container { display: flex; overflow-x: auto; gap: 10px; padding-bottom: 10px; }
        .card { 
            min-width: 120px; background: #f0f0f0; color: #333; 
            padding: 10px; border-radius: 8px; font-size: 0.8rem;
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .card b { font-size: 0.9rem; color: #000; }
        .card button { padding: 5px; margin-top: 5px; font-size: 0.7rem; background: #2ecc71; }

        /* æ—¥èªŒ */
        #log { font-size: 0.75rem; color: #aaa; height: 60px; overflow-y: auto; border-top: 1px solid #444; padding-top: 5px; }
    </style>
</head>
<body>

    <div class="stats">
        <span>ğŸ’ <span id="crystal">0</span></span>
        <span>â­ <span id="summon-limit">0/1</span></span>
        <span>ğŸ’§<span id="water">0</span> ğŸ”¥<span id="fire">0</span> ğŸƒ<span id="wind">0</span> ğŸª¨<span id="earth">0</span></span>
    </div>

    <div id="season-display">æ˜¥å­£ (ç¬¬ 1 æœˆ)</div>

    <div class="actions">
        <button class="btn-roll" onclick="rollDice()">ğŸ² æ“²éª°å­</button>
        <button class="btn-next" onclick="nextTurn()">â³ ä¸‹å€‹æœˆ</button>
    </div>

    <h4 style="margin: 5px 0;">å¯å¬å–šå¡ç‰Œ</h4>
    <div class="card-container" id="card-market"></div>

    <h4 style="margin: 5px 0;">éŠæˆ²æ—¥èªŒ</h4>
    <div id="log">æ­¡è¿ä¾†åˆ°é˜¿è‹Ÿæ–¯æ£®æ—...</div>

<script>
    // --- éŠæˆ²è³‡æ–™ ---
    const seasons = [
        { name: 'æ˜¥å­£', color: 'var(--spring)', dice: [{w:1, f:0, e:0, wi:0, c:2}, {w:0, f:0, e:0, wi:1, c:3, s:1}] },
        { name: 'å¤å­£', color: 'var(--summer)', dice: [{w:0, f:1, e:0, wi:0, c:5}, {w:0, f:0, e:1, wi:0, c:2, s:1}] },
        { name: 'ç§‹å­£', color: 'var(--autumn)', dice: [{w:0, f:0, e:0, wi:1, c:4}, {w:0, f:1, e:0, wi:0, c:2, s:1}] },
        { name: 'å†¬å­£', color: 'var(--winter)', dice: [{w:0, f:0, e:1, wi:0, c:3}, {w:1, f:0, e:0, wi:0, c:1, s:1}] }
    ];

    const cards = [
        { id: 1, name: "æ°´ä¹‹ç²¾éˆ", cost: {water:1}, vp: 6, effect: () => { player.crystals += 4; } },
        { id: 2, name: "å¤§åœ°å·¨äºº", cost: {earth:1, fire:1}, vp: 12, effect: () => { player.summonMax += 1; } },
        { id: 3, name: "é¢¨ä¹‹ç¥åƒ•", cost: {wind:2}, vp: 15, effect: () => { player.crystals += 10; } }
    ];

    // --- ç©å®¶ç‹€æ…‹ ---
    let player = {
        month: 0,
        crystals: 0,
        water: 0, fire: 0, earth: 0, wind: 0,
        summonMax: 1,
        currentSummon: 0
    };

    // --- é‚è¼¯å‡½æ•¸ ---
    function updateUI() {
        const sIdx = Math.floor(player.month / 3);
        const s = seasons[sIdx];
        const display = document.getElementById('season-display');
        display.innerText = `${s.name} (ç¬¬ ${player.month + 1} æœˆ)`;
        display.style.backgroundColor = s.color;

        document.getElementById('crystal').innerText = player.crystals;
        document.getElementById('summon-limit').innerText = `${player.currentSummon}/${player.summonMax}`;
        document.getElementById('water').innerText = player.water;
        document.getElementById('fire').innerText = player.fire;
        document.getElementById('earth').innerText = player.earth;
        document.getElementById('wind').innerText = player.wind;
    }

    function log(msg) {
        const logBox = document.getElementById('log');
        logBox.innerHTML = `> ${msg}<br>${logBox.innerHTML}`;
    }

    function rollDice() {
        const sIdx = Math.floor(player.month / 3);
        const pool = seasons[sIdx].dice;
        const res = pool[Math.floor(Math.random() * pool.length)];

        player.water += (res.w || 0);
        player.fire += (res.f || 0);
        player.earth += (res.e || 0);
        player.wind += (res.wi || 0);
        player.crystals += (res.c || 0);
        if(res.s) player.summonMax += res.s;

        log(`ç²å¾—äº† è³‡æº/æ°´æ™¶ï¼`);
        updateUI();
    }

    function nextTurn() {
        player.month = (player.month + 1) % 12;
        log(`é€²å…¥ä¸‹å€‹æœˆ...`);
        updateUI();
    }

    function summon(cardId) {
        const card = cards.find(c => c.id === cardId);
        if (player.currentSummon >= player.summonMax) return log("å¬å–šä½ä¸è¶³ï¼");

        for (let res in card.cost) {
            if (player[res] < card.cost[res]) return log(`ç¼ºå°‘ ${res} å…ƒç´ ï¼`);
        }

        // æ‰£é™¤è²»ç”¨
        for (let res in card.cost) player[res] -= card.cost[res];
        
        player.currentSummon++;
        card.effect();
        log(`æˆåŠŸå¬å–š ${card.name}ï¼`);
        updateUI();
    }

    // åˆå§‹åŒ–å¸‚å ´
    function initMarket() {
        const market = document.getElementById('card-market');
        cards.forEach(card => {
            const costText = Object.entries(card.cost).map(([k,v]) => `${v}${k}`).join(',');
            market.innerHTML += `
                <div class="card">
                    <b>${card.name}</b>
                    <span>æ¶ˆè€—: ${costText}</span>
                    <span>VP: ${card.vp}</span>
                    <button onclick="summon(${card.id})">å¬å–š</button>
                </div>`;
        });
    }

    initMarket();
    updateUI();
</script>
</body>
</html>
